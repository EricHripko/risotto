
<!DOCTYPE HTML>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Risotto</title>
    <meta name="author" content="bison">

    <link rel="stylesheet" type="text/css" href="css/form.css" />
    <link href='https://fonts.googleapis.com/css?family=Lato:100,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="scripts/crud.js"></script>
    <script type="text/javascript" src="scripts/booking.js"></script>
    <script type="text/javascript">
        var server = new CRUDResource("http://localhost:8080", ["bookings"]);
    </script>
</head>


<body>

<form id="bookingCreation">
    <input type="text" id="name" placeholder="Name">
    <br>

    <input type="tel" id="phone" placeholder="Phone">
    <br>

    <input type="number" id="party" placeholder="Party size" min=1 step=1>
    <br>

    <input type="email" id="email" placeholder="Email">
    <br>
</form>

<script type="text/javascript">
    document.getElementById("buttonForm").addEventListener("click", function () {
        // Retrieve the booking information
        var name = document.getElementById("name").value;
        var phone = document.getElementById("phone").value;
        var party = document.getElementById("party").value;
        var email = document.getElementById("email").value;
        var date = document.getElementById("date").value;
        var time = document.getElementById("time").value;
        // Create a booking object and send the information off
        party = parseInt(party);
        date = new Date(date + " " + time);

        var booking = new Booking(name, phone, email, party, date);
        BookingService.make(booking).then(
                function (val) {
                    console.log("Success", val);
                }).catch(
                function (ex) {
                    console.log("Failed to make a booking", ex);
                });
    });
</script>
</body>