<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Risotto</title>

    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script type="text/javascript" src="scripts/crud.js"></script>
    <script type="text/javascript">var server = new CRUDResource("http://localhost:8080", ["bookings", "menu"]);</script>
    <script type="text/javascript" src="scripts/booking.js"></script>
    <script type="text/javascript" src="scripts/rivets.bundled.js"></script>
    <script type="text/javascript" src="scripts/model-main.js"></script>
    <script type="text/javascript" src="scripts/model-menu.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">
</head>
<body>

<div id="mainScreen">
   <div id="header">
       <h1>Bookings</h1>
       <h2>{now | time}</h2>
       <h3>{now | shortDate}</h3>
   </div>

    <div id="bookingGrid">
        <table id="calendar" style="background: #263238;">
            <tr>
                <th rv-each-table="tables" class="header">{table.description}</th>
            </tr>
            <tr rv-each-time="timescale" rv-hours="time.hour" rv-mins="time.mins">
                <td rv-each-table="time.tables" rv-table="table.id" onclick="createBooking(event)">
                    <div class="booking" rv-each-booking="table.bookings" onclick="showOrderScreen(event)">
                       <div class="bookingTime">
                           {booking.date | time}<br>
                       </div>
                       <div class="customerName">
                        <strong>{booking.customerName}</strong>
                       </div>
                       <div class ="otherInfo">
                           {booking.partySize} customers
                            <br>
                            {booking.phoneNumber}
                            <br> 
                       </div>
                    </div>
                </td>
            </tr>
        </table>

        <ul id="timescale">
            <li rv-each-hour="hours">{hour}</li>
        </ul>

        <form id="bookingCreation" class="hidden">
            <div id="time">{activeSlot.hour}:{activeSlot.mins | padZeroes}</div>
            <i id="bookingCancel" class="material-icons" onclick="cancelBooking(event)">close</i>
            <i id="bookingConfirm" class="material-icons" onclick="confirmBooking(event)">check</i>

            <input type="text" id="name" placeholder="Name" value="Walk In">
            <br>

            <input type="tel" id="phone" placeholder="Phone">
            <br>

            <input type="number" id="party" placeholder="Party size" min=1 step=1>
            <br>

            <input type="email" id="email" placeholder="Email">
            <br>
        </form>
    </div>

</div>
<div id="menuScreen">
    <div class="leftPanel">
        <h2>Table {table.description}</h2>
        <div class="meals">
            <div rv-each-meal="order" class="meal">
                <h4>{meal.name}</h4>
                <div class="counter">
                    <i class="less material-icons" onclick="decreaseCount(event)">remove</i>
                    <input type="text" rv-value="meal.count">
                    <i class="more material-icons" onclick="increaseCount(event)">add</i>
                </div>
            </div>
        </div>
        <br>
        <div class="total">
            <h4>Total</h4>
            <h5>{orderTotal | gbp}</h5>
        </div>
    </div>
    <div class="rightPanel">
        <h2>Menu</h2>
        <div>
            <div rv-each-category="menu">
                <h3>{category.name}</h3>
                <div>
                    <div class="meal" rv-each-meal="category.meals" rv-category="meal.category" onclick="orderMeal(event)">
                        <h4>{meal.name}</h4>
                        <h5>{meal.description}</h5>
                        <span class="price">{meal.price | gbp}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>